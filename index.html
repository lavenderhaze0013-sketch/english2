<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š The Missing Gold</title>
    <!-- Load Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¥¸ í°íŠ¸ ì¶”ê°€ */
        @font-face {
            font-family: 'OngleipParkDahyeon';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2411-3@1.0/Ownglyph_ParkDaHyun.woff2') format('woff2');
            font-weight: normal;
            font-display: swap;
        }

        /* Use the requested font and set background */
        body {
            font-family: 'OngleipParkDahyeon', sans-serif; /* í°íŠ¸ ì ìš© */
            background-color: #fcf8e8; /* Light, warm background */
        }
        
        /* Quiz blank input field style */
        .quiz-input {
            border: none;
            border-bottom: 3px dashed #f6ad55; /* ì ì„  ë°‘ì¤„ */
            outline: none;
            padding: 2px 4px;
            text-align: center;
            transition: all 0.3s ease-in-out;
            
            /* íŒíŠ¸ ì œê±° ìš”ì²­ì— ë”°ë¼ ê³ ì • ë„ˆë¹„ ì„¤ì • */
            width: 150px; 
            min-width: 50px; 
            max-width: 100%;
            
            display: inline-block;
            margin: 0 4px;
            font-weight: 700;
            color: #92400e; /* Dark brown text */
            background-color: transparent;
            box-sizing: content-box; 
            font-family: 'OngleipParkDahyeon', sans-serif; /* ë³¸ë¬¸ê³¼ ë™ì¼í•œ í°íŠ¸ ì ìš© */
        }
        /* Correct answer style (Student correctly entered the answer) */
        .correct {
            border-bottom: 3px solid #10b981; /* Solid green border on correct */
            background-color: #ecfdf5;
            pointer-events: none; /* ì •ë‹µ ì‹œ ì…ë ¥ ë¶ˆê°€ */
        }
        /* Incorrect answer style (Student entered a wrong answer) */
        .incorrect {
            border-bottom: 3px solid #ef4444; /* Solid red border on incorrect */
            background-color: #fef2f2;
        }
        /* Revealed answer style (Answer displayed after 3 incorrect attempts) */
        .revealed {
            border-bottom: 3px solid #d97706; /* Darker orange/brown border */
            background-color: #fef3c7; /* Light yellow background for hint */
            color: #d97706; /* Orange text color for emphasis */
            pointer-events: none; /* ì…ë ¥ ë¶ˆê°€ */
        }

        .text-section {
            /* ë³¸ë¬¸ í°íŠ¸ ì ìš© */
            font-family: 'OngleipParkDahyeon', sans-serif !important; 
            line-height: 2.5; /* Increased line height for readability with inputs */
            
            /* ì–‘ìª½ ì •ë ¬ ì ìš© (ë“¤ì—¬ì“°ê¸° ì œê±°í•˜ì—¬ ê¹”ë”í•˜ê²Œ ì •ë ¬) */
            text-align: justify;
            text-justify: inter-word;
            
            /* ì¤„ë°”ê¿ˆ ì‹œ ë‹¨ì–´ ë‹¨ìœ„ë¡œ ëŠì–´ì§€ë„ë¡ ì„¤ì • (CSS ë ˆë²¨ ì²˜ë¦¬) */
            word-break: keep-all; 
        }
        .feedback-message {
            color: #10b981; /* Green for compliments */
            font-style: italic;
            opacity: 0;
            transition: opacity 0.5s ease;
            position: absolute;
            transform: translateY(-20px);
            font-size: 0.8rem;
            white-space: nowrap;
            pointer-events: none;
        }
        /* Style for revealed answer feedback */
        .revealed-feedback {
            color: #d97706 !important; /* Orange/brown for revealed answer message */
        }
        .visible {
            opacity: 1;
            transform: translateY(-35px);
        }
        .input-wrapper {
            display: inline-block;
            position: relative;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Main Quiz Container -->
    <div id="quiz-container" class="bg-white shadow-2xl rounded-3xl p-6 sm:p-10 w-full max-w-4xl border-4 border-yellow-400">
        
        <!-- ì œëª© -->
        <h1 class="text-5xl sm:text-6xl font-extrabold text-center text-yellow-900 mb-6 pb-2">
            ğŸ“š The Missing Gold ğŸ•µï¸
        </h1>
        
        <!-- ì§€ì‹œë¬¸ -->
        <p class="text-left text-gray-700 mb-8 text-2xl">
            ğŸ“– êµê³¼ì„œ ì† ë‹¨ì–´ë‚˜ ì´ë¦„ìœ¼ë¡œ ë¹ˆì¹¸ì„ ì±„ìš°ì„¸ìš”. âœ¨
        </p>

        <!-- Quiz Content (Running Text) -->
        <div id="quiz-content" class="text-2xl font-serif text-gray-800 p-4 bg-yellow-50 rounded-xl shadow-inner">
            <p class="text-section">
                The story begins at <span class="whitespace-nowrap">ğŸ« 
                <span class="input-wrapper">
                    <input type="text" id="q1" data-answer="bakersville" class="quiz-input" autocomplete="off">
                    <span id="feedback-q1" class="feedback-message"></span>
                </span></span>
                Middle School. Mr. <span class="whitespace-nowrap">ğŸ‘¨â€ğŸ«
                <span class="input-wrapper">
                    <input type="text" id="q2" data-answer="reese" class="quiz-input" autocomplete="off">
                    <span id="feedback-q2" class="feedback-message"></span>
                </span></span>
                , the principal, finds that the <span class="whitespace-nowrap">ğŸ¥‡
                <span class="input-wrapper">
                    <input type="text" id="q3" data-answer="gold" class="quiz-input" autocomplete="off">
                    <span id="feedback-q3" class="feedback-message"></span>
                </span></span>
                medal for the <span class="whitespace-nowrap">ğŸ¤ 
                <span class="input-wrapper">
                    <input type="text" id="q4" data-answer="talent" class="quiz-input" autocomplete="off">
                    <span id="feedback-q4" class="feedback-message"></span>
                </span></span>
                show has been stolen. The principal quickly runs to find the town's best <span class="whitespace-nowrap">ğŸ”
                <span class="input-wrapper">
                    <input type="text" id="q5" data-answer="detective" class="quiz-input" autocomplete="off">
                    <span id="feedback-q5" class="feedback-message"></span>
                </span></span>
                , an eighth-grade student named <span class="whitespace-nowrap">ğŸ‘§
                <span class="input-wrapper">
                    <input type="text" id="q6" data-answer="shirley" class="quiz-input" autocomplete="off">
                    <span id="feedback-q6" class="feedback-message"></span>
                </span></span>
                . The thief has broken a window and left a short <span class="whitespace-nowrap">ğŸ“œ
                <span class="input-wrapper">
                    <input type="text" id="q7" data-answer="poem" class="quiz-input" autocomplete="off">
                    <span id="feedback-q7" class="feedback-message"></span>
                </span></span>
                .
                Jocelyn says she saw the thief with <span class="whitespace-nowrap">ğŸ’‡â€â™€ï¸ 
                <span class="input-wrapper">
                    <input type="text" id="q8" data-answer="short" class="quiz-input" autocomplete="off">
                    <span id="feedback-q8" class="feedback-message"></span>
                </span></span>
                hair run away during the <span class="whitespace-nowrap">â›ˆï¸
                <span class="input-wrapper">
                    <input type="text" id="q9" data-answer="thunder" class="quiz-input" autocomplete="off">
                    <span id="feedback-q9" class="feedback-message"></span>
                </span></span>
                .
                Sylvia says she saw a <span class="whitespace-nowrap">ğŸ‘§ 
                <span class="input-wrapper">
                    <input type="text" id="q10" data-answer="girl" class="quiz-input" autocomplete="off">
                    <span id="feedback-q10" class="feedback-message"></span>
                </span></span>
                next to the case.
                Harry says he was practicing his <span class="whitespace-nowrap">ğŸ•º 
                <span class="input-wrapper">
                    <input type="text" id="q11" data-answer="dance" class="quiz-input" autocomplete="off">
                    <span id="feedback-q11" class="feedback-message"></span>
                </span></span>
                and heard nothing because his music was too <span class="whitespace-nowrap">ğŸ”Š
                <span class="input-wrapper">
                    <input type="text" id="q12" data-answer="loud" class="quiz-input" autocomplete="off">
                    <span id="feedback-q12" class="feedback-message"></span>
                </span></span>
                .
                Shirley thinks that the thief is <span class="whitespace-nowrap">â­
                <span class="input-wrapper">
                    <input type="text" id="q13" data-answer="jocelyn" class="quiz-input" autocomplete="off">
                    <span id="feedback-q13" class="feedback-message"></span>
                </span></span>
                .
            </p>
        </div>

        <!-- Check Answers Button -->
        <div class="mt-8 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
            <button id="check-btn" 
                    class="w-full sm:w-auto px-8 py-3 bg-yellow-600 text-white font-bold rounded-full shadow-lg hover:bg-yellow-700 transition duration-300 transform hover:scale-105 active:scale-95">
                Final Score Check ğŸ’¯
            </button>
            <button id="reset-btn" 
                    class="w-full sm:w-auto px-8 py-3 bg-gray-300 text-gray-800 font-bold rounded-full shadow-lg hover:bg-gray-400 transition duration-300 transform hover:scale-105 active:scale-95">
                Reset Quiz ğŸ”„
            </button>
        </div>

        <!-- Result Message Area -->
        <div id="result-message" class="mt-8 text-center text-2xl font-bold rounded-xl p-4 hidden transition duration-500">
            <!-- Results will be displayed here. -->
        </div>

    </div>

    <script>
        const checkBtn = document.getElementById('check-btn');
        const resetBtn = document.getElementById('reset-btn');
        const resultMessage = document.getElementById('result-message');
        const inputs = document.querySelectorAll('.quiz-input');
        
        // ì˜¤ë‹µ íšŸìˆ˜ë¥¼ ì €ì¥í•  ê°ì²´ì™€ ìµœëŒ€ í—ˆìš© íšŸìˆ˜
        const incorrectAttempts = {};
        const MAX_ATTEMPTS = 3;

        // ì •ë‹µ ë°ì´í„° (ì†Œë¬¸ìë¡œ í†µì¼)
        const correctAnswers = {
            'q1': ['bakersville'], 
            'q2': ['reese'],
            'q3': ['gold'],
            'q4': ['talent'], 
            'q5': ['detective'],
            'q6': ['shirley'],
            'q7': ['poem'],
            'q8': ['short'], 
            'q9': ['thunder'], 
            'q10': ['girl'], 
            'q11': ['dance'], 
            'q12': ['loud'],
            'q13': ['jocelyn']
        };

        const compliments = ["Correct!", "Amazing!", "Got it!", "Perfect!", "Nice!", "Well done!"];

        /**
         * ì‚¬ìš©ì ì…ë ¥ ë¬¸ìì—´ì„ ì •ê·œí™”í•©ë‹ˆë‹¤. (ì•ë’¤ ê³µë°± ì œê±° ë° ì†Œë¬¸ì ë³€í™˜)
         */
        function normalizeInput(input) {
            return input.trim().toLowerCase();
        }

        /**
         * 3íšŒ ì˜¤ë‹µ ì‹œ ì •ë‹µì„ í‘œì‹œí•˜ê³  í•„ë“œë¥¼ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.
         */
        function revealAnswer(input) {
            const inputId = input.id;
            const answer = correctAnswers[inputId][0]; 
            const feedbackElement = document.getElementById(`feedback-${inputId}`);

            // ì •ë‹µ í‘œì‹œ ë° ìŠ¤íƒ€ì¼ ì ìš©
            input.value = answer; 
            input.classList.remove('incorrect');
            input.classList.add('revealed');    
            input.disabled = true;

            // í”¼ë“œë°± ë©”ì‹œì§€ í‘œì‹œ
            feedbackElement.textContent = `Answer: ${answer}`;
            feedbackElement.style.color = "#d97706"; 
            feedbackElement.classList.add('visible', 'revealed-feedback');
        }

        /**
         * ê°œë³„ ì…ë ¥ í•„ë“œë¥¼ í™•ì¸í•˜ê³  ì¦‰ê°ì ì¸ í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.
         */
        function checkIndividualInput(input) {
            const inputId = input.id;
            const userAnswer = normalizeInput(input.value);
            const answers = correctAnswers[inputId];
            const feedbackElement = document.getElementById(`feedback-${inputId}`);
            
            // ì´ë¯¸ ì •ë‹µ ë˜ëŠ” ê³µê°œëœ ê²½ìš° ë¬´ì‹œ
            if (input.classList.contains('correct') || input.classList.contains('revealed')) {
                return;
            }

            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            input.classList.remove('incorrect');
            feedbackElement.classList.remove('visible', 'revealed-feedback');
            feedbackElement.style.color = "#10b981"; 

            if (userAnswer.length === 0) {
                return;
            }
            
            // ì •ë‹µ ì—¬ë¶€ í™•ì¸
            if (answers.includes(userAnswer)) {
                // --- ì •ë‹µ ì²˜ë¦¬ ---
                input.classList.add('correct');
                input.disabled = true; 
                incorrectAttempts[inputId] = 0; 
                
                // ì¹­ì°¬ ë©˜íŠ¸ í‘œì‹œ
                const compliment = compliments[Math.floor(Math.random() * compliments.length)];
                feedbackElement.textContent = compliment;
                feedbackElement.classList.add('visible');
                
            } else {
                // --- ì˜¤ë‹µ ì²˜ë¦¬ ---
                input.classList.add('incorrect');
                
                // ì˜¤ë‹µ íšŸìˆ˜ ì¦ê°€
                incorrectAttempts[inputId] = (incorrectAttempts[inputId] || 0) + 1;
                
                if (incorrectAttempts[inputId] >= MAX_ATTEMPTS) {
                    revealAnswer(input);
                } else {
                    // ì¹­ì°¬ ëŒ€ì‹  í˜„ì¬ ì˜¤ë‹µ íšŸìˆ˜ í‘œì‹œ
                    feedbackElement.textContent = `Try again (${incorrectAttempts[inputId]}/${MAX_ATTEMPTS})`;
                    feedbackElement.style.color = "#ef4444"; 
                    feedbackElement.classList.add('visible');
                }
            }
        }
        
        // --- ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ---
        inputs.forEach((input, index) => {
            // ì´ˆê¸° ì˜¤ë‹µ íšŸìˆ˜ ì„¤ì •
            incorrectAttempts[input.id] = 0;

            // input ì´ë²¤íŠ¸: ìˆ˜ì • ì¤‘ì—ëŠ” ì±„ì  ìƒíƒœ ì´ˆê¸°í™”
            input.addEventListener('input', () => {
                 input.classList.remove('incorrect', 'correct');
                 
                 const feedbackElement = document.getElementById(`feedback-${input.id}`);
                 if (feedbackElement) {
                     feedbackElement.classList.remove('visible', 'revealed-feedback');
                     feedbackElement.textContent = '';
                 }
            });
            
            // Keypress: Enter í‚¤ ì²˜ë¦¬
            input.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    
                    // ì£¼ì˜: Enter í‚¤ë¥¼ ëˆ„ë¥¼ ë•Œ checkIndividualInput(input)ì„ ì—¬ê¸°ì„œ í˜¸ì¶œí•˜ë©´,
                    // í¬ì»¤ìŠ¤ê°€ ì´ë™í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” blur ì´ë²¤íŠ¸ë¡œ ì¸í•´ ì±„ì ì´ ë‘ ë²ˆ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. (ë”ë¸” ì¹´ìš´íŒ… ë¬¸ì œ)
                    // ë”°ë¼ì„œ ì—¬ê¸°ì„œëŠ” í¬ì»¤ìŠ¤ ì´ë™ë§Œ ìˆ˜í–‰í•˜ê³ , ì‹¤ì œ ì±„ì ì€ blur ì´ë²¤íŠ¸ì— ìœ„ì„í•©ë‹ˆë‹¤.
                    
                    // ë‹¤ìŒ ì…ë ¥ í•„ë“œë¡œ í¬ì»¤ìŠ¤ ì´ë™
                    if (index < inputs.length - 1) {
                        inputs[index + 1].focus();
                    } else {
                        checkBtn.focus();
                    }
                }
            });

            // Blur: í¬ì»¤ìŠ¤ê°€ ë‚˜ê°ˆ ë•Œ ì±„ì  (ì—¬ê¸°ê°€ ë©”ì¸ ì±„ì  ë¡œì§)
            input.addEventListener('blur', () => {
                // ê°’ì´ ë¹„ì–´ìˆì§€ ì•Šì„ ë•Œë§Œ ì±„ì 
                if(input.value.trim() !== "") {
                    checkIndividualInput(input);
                }
            });
        });

        // --- ì¼ê´„ ì±„ì  í•¨ìˆ˜ (ë²„íŠ¼ í´ë¦­ ì‹œ) ---
        function checkAllAnswers() {
            let correctCount = 0;
            const totalQuestions = inputs.length;

            inputs.forEach(input => {
                const inputId = input.id;
                const userAnswer = normalizeInput(input.value);
                const answers = correctAnswers[inputId];
                const feedbackElement = document.getElementById(`feedback-${inputId}`);
                
                // ì´ë¯¸ ì •ë‹µì´ê±°ë‚˜ ê³µê°œëœ ìƒíƒœë¼ë©´ íŒ¨ìŠ¤
                if (input.classList.contains('correct')) {
                    correctCount++;
                    return;
                }
                if (input.classList.contains('revealed')) {
                    return; 
                }

                // ë¹ˆì¹¸ì¸ ê²½ìš°
                if (userAnswer.length === 0) {
                    input.classList.add('incorrect');
                    feedbackElement.textContent = "Empty!";
                    feedbackElement.style.color = "#ef4444";
                    feedbackElement.classList.add('visible');
                    return;
                }

                // ì •ë‹µ í™•ì¸ ë¡œì§
                if (answers.includes(userAnswer)) {
                    input.classList.add('correct');
                    input.disabled = true; 
                    correctCount++;
                } else {
                    input.classList.add('incorrect');
                    feedbackElement.textContent = "Incorrect";
                    feedbackElement.style.color = "#ef4444";
                    feedbackElement.classList.add('visible');
                }
            });

            // ìµœì¢… ê²°ê³¼ ë©”ì‹œì§€ í‘œì‹œ
            const score = Math.round((correctCount / totalQuestions) * 100);
            resultMessage.classList.remove('hidden', 'bg-red-100', 'text-red-700', 'bg-yellow-100', 'text-yellow-700', 'bg-green-100', 'text-green-700', 'animate-pulse');
            
            if (score === 100) {
                resultMessage.innerHTML = `ğŸ‰ Perfect Score! You know the story inside and out! (${score}%)`;
                resultMessage.classList.add('bg-green-100', 'text-green-700', 'animate-pulse');
            } else if (score >= 70) {
                resultMessage.innerHTML = `ğŸ‘ Great Job! You got most of the details right. (${score}%)`;
                resultMessage.classList.add('bg-yellow-100', 'text-yellow-700');
            } else {
                resultMessage.innerHTML = `ğŸ“š Keep Studying! Check the hints and try again. (${score}%)`;
                resultMessage.classList.add('bg-red-100', 'text-red-700');
            }
            
            resultMessage.classList.remove('hidden');
        }

        checkBtn.addEventListener('click', checkAllAnswers);

        resetBtn.addEventListener('click', () => {
            inputs.forEach(input => {
                input.value = '';
                input.classList.remove('correct', 'incorrect', 'revealed');
                input.disabled = false;
                incorrectAttempts[input.id] = 0;

                const feedbackElement = document.getElementById(`feedback-${input.id}`);
                feedbackElement.classList.remove('visible', 'revealed-feedback');
                feedbackElement.textContent = '';
                feedbackElement.style.color = "#10b981"; 
            });
            resultMessage.classList.add('hidden');
        });

    </script>

</body>
</html>
